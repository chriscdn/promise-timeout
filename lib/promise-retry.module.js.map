{"version":3,"file":"promise-retry.module.js","sources":["../src/index.ts"],"sourcesContent":["const promiseTimeout = <T>(\n  promise: Promise<T>,\n  timeout: number,\n  errMsg = \"The promise timed out.\",\n): Promise<T> => {\n  return asyncTimeout(() => promise, timeout, errMsg);\n};\n\nconst asyncTimeout = <T>(\n  asyncFn: () => Promise<T>, // Accepts an async function or a function returning a Promise\n  timeout: number,\n  errMsg = \"The promise timed out.\",\n): Promise<T> => {\n  let timeoutID: ReturnType<typeof setTimeout>;\n\n  const timeOutPromise = new Promise<T>((_, reject) =>\n    timeoutID = setTimeout(() => reject(new Error(errMsg)), timeout)\n  );\n\n  return Promise.race([asyncFn(), timeOutPromise]) // Invoke asyncFn to get the Promise\n    .finally(() => clearTimeout(timeoutID));\n};\n\nexport { asyncTimeout, promiseTimeout };\n"],"names":["promiseTimeout","promise","timeout","errMsg","asyncTimeout","asyncFn","timeoutID","timeOutPromise","Promise","_","reject","setTimeout","Error","race","clearTimeout"],"mappings":"AAAM,IAAAA,EAAiB,SACrBC,EACAC,EACAC,GAEA,YAFAA,IAAAA,IAAAA,EAAS,0BAEFC,EAAa,WAAA,OAAMH,CAAO,EAAEC,EAASC,EAC9C,EAEMC,EAAe,SACnBC,EACAH,EACAC,GAEA,IAAIG,OAFJH,IAAAA,IAAAA,EAAS,0BAIT,IAAMI,EAAiB,IAAIC,QAAW,SAACC,EAAGC,GACxC,OAAAJ,EAAYK,WAAW,WAAM,OAAAD,EAAO,IAAIE,MAAMT,GAAQ,EAAED,EAAQ,GAGlE,OAAOM,QAAQK,KAAK,CAACR,IAAWE,IACtB,QAAC,WAAM,OAAAO,aAAaR,EAAU,EAC1C"}